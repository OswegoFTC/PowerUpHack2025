// PowerUs AI - Frontend Application Logic
class PowerUsApp {
  constructor() {
    this.currentConversationId = null;
    this.currentMatches = [];
    this.selectedWorker = null;
    this.bookingStep = 'workers';
    this.selectedDateTime = null;
    this.serviceType = '';
    this.userRequest = '';
    this.deadline = null;
    this.agentMatches = null;
    this.workerDatabase = this.initWorkerDatabase();
    this.init();
  }

  initWorkerDatabase() {
    return {
      handyman: [
        { id: "1", name: "Mike Johnson", profession: "Expert Handyman", rating: 4.9, reviews: 156, distance: 1.3, hourlyRate: 65, specialties: ["Plumbing", "Electrical", "Repairs"], responseTime: "15 min", completedJobs: 234, image: "/api/placeholder/150/150" },
        { id: "7", name: "Carlos Martinez", profession: "Master Handyman", rating: 4.7, reviews: 89, distance: 2.1, hourlyRate: 58, specialties: ["Carpentry", "Drywall", "Fixtures"], responseTime: "25 min", completedJobs: 167, image: "/api/placeholder/150/150" },
        { id: "8", name: "Tom Wilson", profession: "Skilled Handyman", rating: 4.5, reviews: 73, distance: 3.8, hourlyRate: 52, specialties: ["General Repairs", "Assembly", "Mounting"], responseTime: "35 min", completedJobs: 145, image: "/api/placeholder/150/150" }
      ],
      electrician: [
        { id: "18", name: "Steve Anderson", profession: "Licensed Electrician", rating: 4.9, reviews: 203, distance: 1.8, hourlyRate: 85, specialties: ["Wiring", "Panel Upgrades", "Outlets"], responseTime: "20 min", completedJobs: 312, image: "/api/placeholder/150/150" },
        { id: "19", name: "Marcus Thompson", profession: "Master Electrician", rating: 4.8, reviews: 127, distance: 2.9, hourlyRate: 95, specialties: ["Commercial", "Troubleshooting", "Code Work"], responseTime: "30 min", completedJobs: 289, image: "/api/placeholder/150/150" },
        { id: "20", name: "David Lee", profession: "Electrical Contractor", rating: 4.6, reviews: 98, distance: 4.5, hourlyRate: 78, specialties: ["Residential", "Lighting", "Repairs"], responseTime: "45 min", completedJobs: 198, image: "/api/placeholder/150/150" }
      ],
      plumber: [
        { id: "21", name: "Rick Williams", profession: "Licensed Plumber", rating: 4.7, reviews: 134, distance: 2.8, hourlyRate: 75, specialties: ["Leak Repairs", "Drain Cleaning", "Pipe Work"], responseTime: "30 min", completedJobs: 267, image: "/api/placeholder/150/150" },
        { id: "22", name: "Tony Garcia", profession: "Emergency Plumber", rating: 4.8, reviews: 156, distance: 1.5, hourlyRate: 88, specialties: ["24/7 Service", "Sewer Lines", "Water Heaters"], responseTime: "15 min", completedJobs: 223, image: "/api/placeholder/150/150" },
        { id: "23", name: "Sam Rodriguez", profession: "Plumbing Specialist", rating: 4.4, reviews: 87, distance: 3.2, hourlyRate: 68, specialties: ["Fixture Installation", "Pipe Repair", "Maintenance"], responseTime: "40 min", completedJobs: 178, image: "/api/placeholder/150/150" }
      ]
    };
  }

  init() {
    this.setupEventListeners();
    this.setupMobileMenu();
    this.setupDarkMode();
    this.loadWorkers();
    this.showPage('find-workers');
  }

  setupEventListeners() {
    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();
        const page = item.dataset.page;
        this.showPage(page);
        this.updateActiveNav(item);
        this.closeMobileMenu(); // Close mobile menu on navigation
      });
    });

    // Chat functionality
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const imageUpload = document.getElementById('imageUpload');
    const imageInput = document.getElementById('imageInput');

    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        this.sendMessage();
      }
    });

    sendBtn.addEventListener('click', () => this.sendMessage());

    imageUpload.addEventListener('click', () => {
      imageInput.click();
    });

    imageInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        this.uploadImage(e.target.files[0]);
      }
    });
  }

  setupMobileMenu() {
    const openBtn = document.getElementById('openMobileMenu');
    const closeBtn = document.getElementById('closeMobileMenu');
    const overlay = document.getElementById('mobileMenuOverlay');
    const sidebar = document.getElementById('sidebar');

    if (openBtn) {
      openBtn.addEventListener('click', () => this.openMobileMenu());
    }

    if (closeBtn) {
      closeBtn.addEventListener('click', () => this.closeMobileMenu());
    }

    if (overlay) {
      overlay.addEventListener('click', () => this.closeMobileMenu());
    }
  }

  openMobileMenu() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('mobileMenuOverlay');
    
    if (sidebar) {
      sidebar.classList.remove('-translate-x-full');
      sidebar.classList.add('translate-x-0');
    }
    
    if (overlay) {
      overlay.classList.remove('hidden');
    }
  }

  closeMobileMenu() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('mobileMenuOverlay');
    
    if (sidebar) {
      sidebar.classList.add('-translate-x-full');
      sidebar.classList.remove('translate-x-0');
    }
    
    if (overlay) {
      overlay.classList.add('hidden');
    }
  }

  setupDarkMode() {
    const darkModeToggle = document.getElementById('darkModeToggle');
    const darkModeIcon = document.getElementById('darkModeIcon');
    
    // Check for saved dark mode preference or default to light mode
    const isDarkMode = localStorage.getItem('darkMode') === 'true';
    this.setDarkMode(isDarkMode);
    
    if (darkModeToggle) {
      darkModeToggle.addEventListener('click', () => {
        const currentDarkMode = document.documentElement.classList.contains('dark');
        this.setDarkMode(!currentDarkMode);
        localStorage.setItem('darkMode', (!currentDarkMode).toString());
      });
    }
  }

  setDarkMode(isDark) {
    const darkModeIcon = document.getElementById('darkModeIcon');
    
    if (isDark) {
      document.documentElement.classList.add('dark');
      if (darkModeIcon) darkModeIcon.textContent = '‚òÄÔ∏è';
    } else {
      document.documentElement.classList.remove('dark');
      if (darkModeIcon) darkModeIcon.textContent = 'üåô';
    }
  }

  setupModalEventListeners() {
    // Modal functionality
    const backBtn = document.getElementById('backBtn');
    const successBackBtn = document.getElementById('successBackBtn');
    const continueToDashboard = document.getElementById('continueToDashboard');

    if (backBtn) {
      backBtn.addEventListener('click', () => this.closeModal());
    }

    if (successBackBtn) {
      successBackBtn.addEventListener('click', () => this.closeModal());
    }

    if (continueToDashboard) {
      continueToDashboard.addEventListener('click', () => {
        this.closeModal();
        this.showPage('dashboard');
      });
    }

    // Modal controls
    document.getElementById('closeModal').addEventListener('click', () => {
      this.closeModal();
    });

    document.getElementById('cancelBooking').addEventListener('click', () => {
      this.closeModal();
    });

    document.getElementById('confirmBooking').addEventListener('click', () => {
      this.confirmBooking();
    });

    // Trade filter
    document.getElementById('tradeFilter').addEventListener('change', (e) => {
      this.filterWorkers(e.target.value);
    });

    // Close modal on outside click
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          this.closeModal();
        }
      });
    });
  }

  showPage(pageId) {
    // Hide all pages
    document.querySelectorAll('.page').forEach(page => {
      page.classList.remove('active');
    });

    // Show selected page
    document.getElementById(`${pageId}-page`).classList.add('active');

    // Load page-specific content
    if (pageId === 'browse-workers') {
      this.loadWorkers();
    } else if (pageId === 'dashboard') {
      this.loadDashboard();
    }
  }

  updateActiveNav(activeItem) {
    document.querySelectorAll('.nav-item').forEach(item => {
      item.classList.remove('active');
      // Remove active styling classes
      item.classList.remove('bg-gradient-to-r', 'from-orange-500', 'to-orange-600', 'text-white', 'shadow-lg', 'shadow-orange-500/30', 'hover:from-orange-600', 'hover:to-orange-700');
      // Add inactive styling
      item.classList.add('hover:bg-orange-50/80', 'hover:text-orange-700', 'text-gray-700');
      
      // Remove active indicator
      const indicator = item.querySelector('.absolute.right-3');
      if (indicator) {
        indicator.remove();
      }
      
      // Remove blur overlay
      const blurOverlay = item.querySelector('.absolute.inset-0');
      if (blurOverlay) {
        blurOverlay.remove();
      }
    });
    
    // Add active styling to selected item
    activeItem.classList.add('active');
    activeItem.classList.remove('hover:bg-orange-50/80', 'hover:text-orange-700', 'text-gray-700');
    activeItem.classList.add('bg-gradient-to-r', 'from-orange-500', 'to-orange-600', 'text-white', 'shadow-lg', 'shadow-orange-500/30', 'hover:from-orange-600', 'hover:to-orange-700');
    
    // Add blur overlay
    const blurOverlay = document.createElement('div');
    blurOverlay.className = 'absolute inset-0 bg-gradient-to-r from-orange-400/20 to-orange-600/20 blur-sm';
    activeItem.insertBefore(blurOverlay, activeItem.firstChild);
    
    // Add active indicator
    const indicator = document.createElement('div');
    indicator.className = 'absolute right-3 w-2 h-2 bg-white rounded-full animate-pulse';
    activeItem.appendChild(indicator);
  }

  async sendMessage() {
    const chatInput = document.getElementById('chatInput');
    const message = chatInput.value.trim();
    
    if (!message) return;

    // Clear input and disable send button
    chatInput.value = '';
    const sendBtn = document.getElementById('sendBtn');
    sendBtn.disabled = true;

    // Add user message to chat
    this.addMessageToChat(message, 'user');

    try {
      // Simulate AI processing
      this.addMessageToChat('Finding the best workers for your needs...', 'ai');
      
      // Simulate worker matching using agent logic
      const matches = await this.findWorkers(message);
      this.currentMatches = matches;
      
      if (matches.length > 0) {
        // Instead of displaying matches in chat, start booking flow with BookingFlow style
        this.startBookingFromChat(message, matches);
      } else {
        this.addMessageToChat('I couldn\'t find any workers matching your criteria. Please try a different search.', 'ai');
      }
    } catch (error) {
      this.addMessageToChat('Sorry, there was an error processing your request. Please try again.', 'ai');
    } finally {
      sendBtn.disabled = false;
    }
  }

  startBookingFromChat(userRequest, matches) {
    // Determine service type from user request and matches
    const serviceType = this.detectServiceType(userRequest, matches);
    
    // Set up booking with agent-matched workers but BookingFlow style
    this.serviceType = serviceType;
    this.userRequest = userRequest;
    this.agentMatches = matches; // Store agent matches
    this.bookingStep = 'workers';
    
    // Show booking modal with BookingFlow styling
    this.showBookingModal();
    
    // Add message to chat indicating booking flow started
    this.addMessageToChat(`Great! I found ${matches.length} qualified professionals. Let me help you book an appointment with the best match.`, 'ai');
  }

  detectServiceType(userRequest, matches) {
    const request = userRequest.toLowerCase();
    
    if (request.includes('plumb') || request.includes('leak') || request.includes('pipe') || request.includes('drain')) {
      return 'plumber';
    } else if (request.includes('electric') || request.includes('wiring') || request.includes('outlet') || request.includes('light')) {
      return 'electrician';
    } else {
      return 'handyman';
    }
  }

  addMessage(type, content, isTemporary = false) {
    const chatMessages = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    const messageId = isTemporary ? `temp-${Date.now()}` : null;
    
    if (messageId) {
      messageDiv.id = messageId;
    }

    messageDiv.className = `message ${type}`;
    messageDiv.innerHTML = `
      <div class="message-avatar">${type === 'user' ? 'üë§' : 'ü§ñ'}</div>
      <div class="message-content">
        <p>${content}</p>
      </div>
    `;

    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;

    return messageId;
  }

  showMatches(matches) {
    const matchesSection = document.getElementById('matchesSection');
    const matchesGrid = document.getElementById('matchesGrid');
    
    matchesGrid.innerHTML = '';

    matches.forEach(worker => {
      const workerCard = this.createWorkerCard(worker, true);
      matchesGrid.appendChild(workerCard);
    });

    matchesSection.style.display = 'block';
    
    // Scroll to matches
    setTimeout(() => {
      matchesSection.scrollIntoView({ behavior: 'smooth' });
    }, 100);
  }

  createWorkerCard(worker, showPricing = false) {
    const card = document.createElement('div');
    card.className = 'worker-card';
    
    const pricing = showPricing && worker.pricing ? worker.pricing : null;
    const priceDisplay = pricing ? `$${pricing.total}` : `$${worker.hourlyRate}/hr`;
    const priceLabel = pricing ? 'Total cost' : 'Hourly rate';

    card.innerHTML = `
      <div class="worker-header">
        <div class="worker-avatar">${worker.initials}</div>
        <div class="worker-info">
          <h4>${worker.name}</h4>
          <div class="worker-trade">${worker.trade}</div>
        </div>
      </div>
      
      <div class="worker-stats">
        <div class="worker-rating">
          <span>‚≠ê ${worker.rating}</span>
          <span>(${worker.reviewCount} reviews)</span>
        </div>
        <div>üìç ${worker.distance} mi</div>
        <div>üîß ${worker.completedJobs} jobs</div>
      </div>

      <div class="worker-pricing">
        <div>
          <div class="price-amount">${priceDisplay}</div>
          <div class="price-label">${priceLabel}</div>
        </div>
      </div>

      <div class="worker-availability">
        ${worker.availability.includes('today') ? 
          '<span class="availability-tag">üìÖ Available Today</span>' : 
          '<span class="availability-tag">üìÖ Tomorrow, 8:00 AM</span>'
        }
      </div>

      <div class="worker-actions">
        <button class="btn-primary" onclick="app.bookWorker('${worker.id}')">
          Book Now
        </button>
        <button class="btn-secondary" onclick="app.viewWorkerProfile('${worker.id}')">
          View Profile
        </button>
      </div>
    `;

    return card;
  }

  async loadWorkers() {
    try {
      const response = await fetch('/api/workers');
      const workers = await response.json();
      
      const workersGrid = document.getElementById('workersGrid');
      if (workersGrid) {
        workersGrid.innerHTML = '';
        
        workers.forEach(worker => {
          const workerCard = this.createWorkerCard(worker);
          workersGrid.appendChild(workerCard);
        });
      }
    } catch (error) {
      console.error('Error loading workers:', error);
    }
  }

  async filterWorkers(trade) {
    try {
      const url = trade ? `/api/workers?trade=${trade}` : '/api/workers';
      const response = await fetch(url);
      const workers = await response.json();
      
      const workersGrid = document.getElementById('workersGrid');
      workersGrid.innerHTML = '';
      
      workers.forEach(worker => {
        const workerCard = this.createWorkerCard(worker);
        workersGrid.appendChild(workerCard);
      });
    
    <div class="booking-summary">
    const bookingContent = document.getElementById('bookingContent');
    const stepTitle = document.getElementById('stepTitle');
    const progressFill = document.getElementById('progressFill');
    
    // Update progress
    stepTitle.textContent = 'Step 1 of 3: Choose Worker & Time';
    progressFill.style.width = '33.33%';
    
    bookingContent.innerHTML = `
      <div class="worker-selection">
        <div class="section-title">Choose Worker & Schedule</div>
        <div class="section-subtitle">Choose your ${worker.trade.toLowerCase()} professional and schedule your appointment</div>
        
        <div class="worker-card">
          <div class="worker-avatar">${worker.name.charAt(0)}</div>
          <div class="worker-info">
            <div class="worker-name">${worker.name}</div>
            <div class="worker-trade">${worker.trade}</div>
            <div class="worker-description">Best match for your specific needs</div>
            <div class="worker-stats">
              <div class="worker-stat">‚≠ê ${worker.rating} (${worker.reviewCount || 167})</div>
              <div class="worker-stat">üìç ${worker.distance} mi</div>
              <div class="worker-stat">‚è±Ô∏è 45 min</div>
              <div class="worker-stat">üîß ${worker.completedJobs || 98} jobs</div>
            </div>
            <div class="worker-tags">
              ${worker.specialties.slice(0, 3).map(spec => `<div class="worker-tag">${spec}</div>`).join('')}
              <div class="recommended-badge">üèÜ Recommended</div>
            </div>
          </div>
          <div class="worker-pricing">
            <div class="worker-price">$${worker.pricing.total}</div>
            <div class="price-label">Total cost</div>
            <div class="worker-availability">üìÖ Tomorrow, 8:00 AM</div>
            <button class="book-btn" onclick="app.proceedToConfirmation()">Book Now ></button>
          </div>
        </div>
      </div>
    `;
    
    modal.style.display = 'block';
  }

  proceedToConfirmation() {
    const bookingContent = document.getElementById('bookingContent');
    const stepTitle = document.getElementById('stepTitle');
    const progressFill = document.getElementById('progressFill');
    
    // Update progress to step 2
    stepTitle.textContent = 'Step 2 of 3: Confirm Your Booking';
    progressFill.style.width = '66.66%';
    
    bookingContent.innerHTML = `
      <div class="confirmation-content">
        <div class="section-title">Confirm Your Booking</div>
        <div class="section-subtitle">Please review your booking details before confirming</div>
        
        <div class="booking-summary">
          <div class="summary-worker">
            <div class="summary-worker-avatar">${this.selectedWorker.name.charAt(0)}</div>
            <div class="summary-worker-info">
              <h3>${this.selectedWorker.name}</h3>
              <div class="summary-worker-trade">${this.selectedWorker.trade}</div>
              <div class="summary-worker-rating">‚≠ê ${this.selectedWorker.rating} (${this.selectedWorker.reviewCount || 134} reviews)</div>
            </div>
          </div>
          
          <div class="summary-details">
            <div class="summary-item">
              <div class="summary-label">üìÖ Date & Time<br><span style="font-size: 12px; color: #999;">When the work will begin</span></div>
              <div class="summary-value">Sunday, September 14, 2025<br>8:00 AM</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">üí∞ Total Cost<br><span style="font-size: 12px; color: #999;">Estimated for ~2.5 hours</span></div>
              <div class="summary-price">$${this.selectedWorker.pricing.total}</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">üîß Service<br><span style="font-size: 12px; color: #999;">Type of work requested</span></div>
              <div class="summary-value">${this.selectedWorker.trade}<br>my car wont work</div>
            </div>
          </div>
          
          <button class="confirm-booking-btn" onclick="app.confirmBooking()">‚úì Confirm Booking</button>
        </div>
      </div>
    `;
  }

  confirmBooking() {
    const successModal = document.getElementById('successModal');
    const bookingModal = document.getElementById('bookingModal');
    const finalBookingSummary = document.getElementById('finalBookingSummary');
    
    // Show success modal
    bookingModal.style.display = 'none';
    successModal.style.display = 'block';
    
    // Populate final summary
    finalBookingSummary.innerHTML = `
      <div class="summary-worker">
        <div class="summary-worker-avatar">${this.selectedWorker.name.charAt(0)}</div>
        <div class="summary-worker-info">
          <h3>${this.selectedWorker.name}</h3>
          <div class="summary-worker-trade">${this.selectedWorker.trade}</div>
        </div>
      </div>
      
      <div style="display: flex; justify-content: space-between; margin-top: 16px;">
        <div>
          <div style="font-weight: 600; color: #666; font-size: 14px;">Service Date:</div>
          <div style="color: #1a1a1a; font-weight: 600;">Sun, Sep 14 at 8:00 AM</div>
        </div>
        <div style="text-align: right;">
          <div style="font-weight: 600; color: #666; font-size: 14px;">Total Cost:</div>
          <div style="color: #16a34a; font-weight: 700; font-size: 18px;">$${this.selectedWorker.pricing.total}</div>
        </div>
      </div>
    `;
    
    // Update stats
    const activeJobsElement = document.getElementById('activeJobs');
    if (activeJobsElement) {
      activeJobsElement.textContent = '1';
    }
    
    // Clear current matches
    this.currentMatches = [];
    this.selectedWorker = null;
    
    // Hide matches section
    const matchesSection = document.getElementById('matchesSection');
    if (matchesSection) {
      matchesSection.style.display = 'none';
    }
  }

  showSuccessMessage(message) {
    // Add success message to chat
    this.addMessage('assistant', `‚úÖ ${message}`);
    
    // Show success notification
    const notification = document.createElement('div');
    notification.className = 'success-notification';
    notification.innerHTML = `
      <div class="notification-content">
        <span class="notification-icon">‚úÖ</span>
        <span class="notification-text">${message}</span>
      </div>
    `;
    
    // Add notification styles
    notification.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--success-green);
      color: white;
      padding: 16px 20px;
      border-radius: var(--radius-medium);
      box-shadow: var(--shadow-medium);
      z-index: 1001;
      animation: slideIn 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    // Remove notification after 5 seconds
    setTimeout(() => {
      notification.style.animation = 'slideOut 0.3s ease';
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 300);
    }, 5000);
  }

  updateActiveJobs() {
    const activeJobsElement = document.getElementById('activeJobs');
    if (activeJobsElement) {
      const currentCount = parseInt(activeJobsElement.textContent) || 0;
      activeJobsElement.textContent = currentCount + 1;
    }
  }

  closeModal() {
    document.querySelectorAll('.modal').forEach(modal => {
      modal.classList.remove('active');
    });
  }

  viewWorkerProfile(workerId) {
    // This would show a detailed worker profile modal
    console.log('Viewing profile for worker:', workerId);
    // For now, just show an alert
    alert('Worker profile feature coming soon!');
  }

  async uploadImage(file) {
    const formData = new FormData();
    formData.append('image', file);

    try {
      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData
      });

      const result = await response.json();
      
      if (result.filename) {
        this.addMessage('user', `üì∑ Image uploaded: ${file.name}`);
        this.addMessage('assistant', `I can see the image. Based on what I observe, this looks like it might need a ${result.suggestedTrade}. Let me find the right professionals for you.`);
        
        // Trigger a search based on the image analysis
        setTimeout(() => {
          this.sendMessage();
        }, 1000);
      }
    } catch (error) {
      console.error('Error uploading image:', error);
      this.addMessage('assistant', 'Sorry, I had trouble processing your image. Please try again or describe the problem in text.');
    }
  }

  loadDashboard() {
    // Load recent matches for dashboard
    const recentMatchesList = document.getElementById('recent-matches-list');
    if (recentMatchesList && this.currentMatches.length > 0) {
      recentMatchesList.innerHTML = '';
      
      this.currentMatches.slice(0, 3).forEach(worker => {
        const matchItem = document.createElement('div');
        matchItem.className = 'recent-match-item';
        matchItem.innerHTML = `
          <div class="match-worker">
            <div class="worker-avatar">${worker.initials}</div>
            <div class="worker-info">
              <h4>${worker.name}</h4>
              <div class="worker-trade">${worker.trade}</div>
            </div>
          </div>
          <div class="match-stats">
            <div class="worker-rating">‚≠ê ${worker.rating}</div>
            <div class="worker-distance">üìç ${worker.distance} mi ‚Ä¢ $${worker.hourlyRate}/hr</div>
          </div>
        `;
        recentMatchesList.appendChild(matchItem);
      });
    }
  }
}

// Initialize the app
const app = new PowerUsApp();

// Add CSS for notifications
const notificationStyles = document.createElement('style');
notificationStyles.textContent = `
  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  @keyframes slideOut {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }
  
  .recent-match-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    background: var(--background-white);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-medium);
    margin-bottom: 12px;
  }
  
  .match-worker {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .match-stats {
    text-align: right;
    font-size: 14px;
    color: var(--text-medium);
  }
  
  .booking-form {
    margin: 24px 0;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-dark);
  }
  
  .datetime-display {
    background: var(--background-light);
    padding: 16px;
    border-radius: var(--radius-medium);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .date {
    font-weight: 600;
  }
  
  .time {
    color: var(--primary-orange);
    font-weight: 600;
  }
  
  .cost-breakdown {
    background: var(--background-light);
    padding: 16px;
    border-radius: var(--radius-medium);
  }
  
  .cost-line {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    color: var(--primary-orange);
    font-size: 18px;
  }
  
  .service-type {
    background: var(--background-light);
    padding: 16px;
    border-radius: var(--radius-medium);
  }
  
  .service-category {
    display: block;
    font-weight: 600;
    margin-bottom: 4px;
  }
  
  .service-description {
    color: var(--text-medium);
  }
  
  .worker-summary {
    margin-bottom: 24px;
  }
  
  .summary-details {
    border-top: 1px solid var(--border-light);
    padding-top: 16px;
  }
`;
document.head.appendChild(notificationStyles);
